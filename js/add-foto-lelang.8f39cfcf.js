(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{e584:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",[e("div",{staticClass:"q-pa-md"},[e("div",{staticClass:"q-mb-md"},[e("div",{staticClass:"alert-primary text-grey-8 q-pa-md"},[e("b",[a._v("Foto "+a._s(a.images.length)+" / 5 . ")]),a._v(" Pilih Foto Utama Penawaran\n        Anda. Tambahkan foto lainnya dari sudut yang berbeda untuk menunjukkan\n        kecacadan atau kelebihan dari penawaran Anda\n      ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:0==a.images.length,expression:"images.length == 0"}],staticClass:"flex flex-center column",staticStyle:{height:"300px"}},[e("div",[e("q-icon",{attrs:{size:"3em",name:"check",color:"grey"}})],1),e("div",{staticClass:"text-grey"},[a._v("Belum Ada Foto")])]),e("div",{staticClass:"q-col-gutter-md row items-start"},a._l(a.images,(function(t,i){return e("div",{key:"image"+i,staticClass:"col-6"},[e("q-img",{staticClass:"rounded-borders",staticStyle:{width:"100%"},attrs:{src:a.urlPath+t.image,"spinner-color":"white",ratio:1}},[e("div",{staticClass:"absolute-bottom text-subtitle1 text-center"},[e("div",{staticClass:"row justify-between"},[e("q-btn",{attrs:{size:"xs",flat:"",round:"",color:"white",icon:"fas fa-trash"},on:{click:function(t){a.confirm=!0}}}),e("q-toggle",{attrs:{"no-caps":"","checked-icon":"check",color:"primary",label:1==t.status?"Default":"","false-value":0,"true-value":1,"unchecked-icon":"clear",size:"sm"},on:{input:function(e){return a.changeStatus(t.id)}},model:{value:t.status,callback:function(e){a.$set(t,"status",e)},expression:"image.status"}})],1)])]),e("q-dialog",{ref:"dialogAlert",refInFor:!0,attrs:{persistent:""},model:{value:a.confirm,callback:function(t){a.confirm=t},expression:"confirm"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"eva-alert-triangle",color:"primary","text-color":"white"}}),e("span",{staticClass:"q-ml-sm text-h6"},[a._v("Yakin foto ini dihapus? ")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",flat:"",label:"Cancel",color:"primary"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",flat:"",label:"Hapus",color:"primary"},on:{click:function(e){return a.hapusFoto(t.id)}}})],1)],1)],1)],1)})),0)]),e("q-page-sticky",{attrs:{position:"bottom-right",offset:[20,20]}},[e("q-fab",{attrs:{icon:"eva-plus",color:"primary",direction:"up","vertical-actions-align":"right"}},[e("q-fab-action",{attrs:{"label-position":"left",color:"grey",icon:"photo_camera",label:"Camera"},on:{click:a.gotoCamera}}),e("q-fab-action",{attrs:{"label-position":"left",color:"grey",icon:"perm_media",label:"Gallery"},on:{click:a.getFile}}),e("q-input",{ref:"myFileInput",staticStyle:{display:"none"},attrs:{type:"file",label:"Standard",accept:"image/*"},on:{input:a.captureImageFallback},model:{value:a.myImage,callback:function(t){a.myImage=t},expression:"myImage"}})],1)],1),e("q-footer",{staticClass:"bg-white",attrs:{bordered:""}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pa-md"},[e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"",icon:"eva-arrow-ios-back",color:"white","text-color":"black",label:"Kembali"},on:{click:a.backTo}})],1),e("div",{staticClass:"col q-pa-md"},[e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-arrow-ios-forward",color:"primary","text-color":"white",label:"Lanjut"},on:{click:a.lanjut}})],1)])])],1)},s=[],o=(e("5319"),e("e6cf"),e("758b")),l=e("c2f6"),r={name:"AddFotoLelang",data(){return{myImage:null,images:[],confirm:!1}},created(){this.getLelangBy(this.$route.params.slug)},computed:{urlPath(){return o["e"]()}},methods:{backTo(){this.$router.replace(this.$route.query.redirect||{name:"add.lelang",params:{slug:this.$route.params.slug}},(()=>{}))},lanjut(){this.$router.replace(this.$route.query.redirect||{name:"video.lelang",params:{slug:this.$route.params.slug}},(()=>{}))},getLelangBy(a){o["c"]().get(`/lelang/by/${a}`).then((a=>{console.log("lelang",a.data.media_lelang),this.images=a.data.media_lelang,this.$q.loading.hide()}))},getFile(){this.$refs.myFileInput.$el.click()},captureImageFallback(a){l["b"]({file:a[0],maxSize:500}).then((a=>{this.myImage=a,this.upLoadImage(this.myImage)}))},async upLoadImage(a){if(this.images.length>=5)return this.$q.notify({message:"Maaf, Max 5 Foto Saja",icon:"eva-info"}),!1;let t=a;const e=new FormData;e.append("image",t),e.append("lelang_id",this.$route.params.slug),this.$q.loading.show();try{await o["d"]().post("/lelang/upload_image",e);this.$q.notify({message:"Image Berhasil disimpan",icon:"eva-info"}),this.getLelangBy(this.$route.params.slug),this.$q.loading.hide()}catch(i){this.$q.loading.hide(),console.log(i)}},gotoCamera(){if(this.images.length>=5)return this.$q.notify({message:"Maaf, Max 5 Foto Saja",icon:"eva-info"}),!1;this.$router.replace(this.$route.query.redirect||{name:"foto.lelang.camera",params:{slug:this.$route.params.slug}},(()=>{}))},hapusFoto(a){this.$q.loading.show(),o["c"]().delete(`/media_lelang/remove/${a}`).then((()=>{this.getLelangBy(this.$route.params.slug)}))},changeStatus(a){this.$q.loading.show();let t={params:{id:a,lelang_id:this.$route.params.slug}};o["c"]().get("/media_lelang/update_status",t).then((()=>{this.getLelangBy(this.$route.params.slug)}))}}},n=r,c=e("2877"),m=e("9989"),u=e("0016"),g=e("068f"),d=e("9c40"),p=e("9564"),h=e("24e8"),f=e("f09f"),b=e("a370"),y=e("cb32"),v=e("4b7e"),q=e("de5e"),w=e("c294"),k=e("72db"),$=e("27f9"),C=e("7ff0"),x=e("7f67"),F=e("eebe"),_=e.n(F),I=Object(c["a"])(n,i,s,!1,null,"65a404c4",null);t["default"]=I.exports;_()(I,"components",{QPage:m["a"],QIcon:u["a"],QImg:g["a"],QBtn:d["a"],QToggle:p["a"],QDialog:h["a"],QCard:f["a"],QCardSection:b["a"],QAvatar:y["a"],QCardActions:v["a"],QPageSticky:q["a"],QFab:w["a"],QFabAction:k["a"],QInput:$["a"],QFooter:C["a"]}),_()(I,"directives",{ClosePopup:x["a"]})}}]);