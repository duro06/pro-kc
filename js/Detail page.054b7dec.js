(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"62b9":function(t,e,a){},"68fc":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"fullscreen dark-popup-2"},[a("q-page-sticky",{attrs:{position:"top-right",offset:[10,10]}},[a("q-btn",{attrs:{flat:"",color:"white",icon:"close"},on:{click:function(e){t.open=!t.open}}})],1)],1)},i=[],l={computed:{open:{get(){return this.$store.state.popup.open},set(t){this.$store.commit("popup/SET_OPEN",t)}}}},n=l,o=a("2877"),r=a("de5e"),d=a("9c40"),c=a("eebe"),m=a.n(c),u=Object(o["a"])(n,s,i,!1,null,"2902db65",null);e["a"]=u.exports;m()(u,"components",{QPageSticky:r["a"],QBtn:d["a"]})},a4c9:function(t,e,a){"use strict";a("62b9")},ebc0:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[t.popupImage?a("q-page-sticky",{staticClass:"depan",attrs:{position:"top-right",offset:[18,18]}},[a("q-btn",{attrs:{dense:"",flat:"",icon:"close",size:"lg","text-color":"white"},on:{click:t.closePopup}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1):t._e(),a("q-carousel",{staticClass:"bg-black text-white shadow-1",attrs:{"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white",navigation:"",padding:"",arrows:"",height:"350px"},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.medias,(function(e,s){return a("q-carousel-slide",{key:"media"+s,attrs:{name:s}},[e.video?a("div",[a("q-video",{staticClass:"absolute-full",attrs:{src:t.urlPath+e.media}})],1):a("q-img",{staticClass:"absolute-full",attrs:{src:t.urlPath+e.media},on:{click:function(e){t.popupImage=!t.popupImage}}})],1)})),1),a("q-card",{staticClass:"my-card",attrs:{flat:"",square:""}},[a("q-card-section",{staticClass:"q-pt-sm bg-primary"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 text-white"},[t._v("\n            "+t._s(t._f("formatRp")(t.lelang.harga_pembuka+t.nominalBid))+"\n          ")])]),a("div",{staticClass:"col text-right"},[a("div",{staticClass:"text-white"},[t._v("berakhir dalam")]),a("div",{staticClass:"text-white"},[a("q-btn",{attrs:{push:"","no-caps":"",size:"sm",icon:"eva-clock",color:"black","text-color":"white",label:t.status}})],1)])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row no-wrap items-center"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-body1 text-weight-medium"},[t._v(t._s(t.lelang.judul))]),a("div",[a("q-icon",{staticClass:"text-purple q-mr-sm f-16",attrs:{name:"eva-person-done"}}),a("span",[t._v(t._s(t.user.name))])],1),a("div",[a("q-icon",{staticClass:"text-purple f-14 q-mr-sm",attrs:{name:"fas fa-map-marker-alt"}}),a("span",[t._v(t._s(t.user.kota))])],1)]),a("div",{staticClass:"col text-right"},[a("q-btn",{staticStyle:{color:"grey"},attrs:{"no-caps":"",outline:"",disable:""}},[a("q-icon",{staticClass:"text-primary",staticStyle:{"font-size":"1em"},attrs:{name:"eva-plus"}}),a("q-icon",{staticClass:"text-primary q-mr-sm",staticStyle:{"font-size":"1em"},attrs:{name:"eva-plus"}}),t._v("\n            "+t._s(t._f("formatRp")(t.lelang.kelipatan))+"\n          ")],1),a("q-btn",{staticClass:"q-mt-sm",staticStyle:{color:"grey"},attrs:{"no-caps":""},on:{click:t.forum}},[a("q-icon",{staticClass:"text-primary q-mr-sm",staticStyle:{"font-size":"1.5em"},attrs:{name:"eva-message-circle-outline"}}),t._v("\n            Forum\n          ")],1)],1)])]),void 0!=t.lelang.bid&&t.lelang.bid.length?a("div",[a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("p",{staticClass:"q-mt-sm"},[a("span",{staticClass:"text-bold text-blue"},[t._v("Bid Terakhir")])])]),a("div",{staticClass:"col text-italic items-center"},[a("div",{staticClass:"row justify-end"},[a("div",{staticClass:"q-mt-sm"},[a("span",[t._v(t._s(t.lelang.bid.length)+" bid total")])]),t.lelang.bid.length>2?a("div",[t.lastBidder?t._e():a("q-btn",{attrs:{"no-caps":"",dense:"",flat:"",icon:"eva-chevron-down-outline"},on:{click:function(e){t.lastBidder=!t.lastBidder}}}),t.lastBidder?a("q-btn",{attrs:{"no-caps":"",dense:"",flat:"",icon:"eva-chevron-up-outline"},on:{click:function(e){t.lastBidder=!t.lastBidder}}}):t._e()],1):t._e()])])]),t.lastBidder?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[t._v("\n              "+t._s(t._f("timeFormat")(t.lelang.bid[0].created_at))+"\n              "),a("span",{staticClass:"text-bold q-mx-sm"},[t._v("\n                "+t._s(t.lelang.bid[0].bidder.name))])]),t.lelang.bid[1]?a("div",{staticClass:"row"},[t._v("\n              "+t._s(t._f("timeFormat")(t.lelang.bid[1].created_at))+"\n              "),a("span",{staticClass:"text-bold q-mx-sm"},[t._v("\n                "+t._s(t.lelang.bid[1].bidder.name))])]):t._e()]),a("div",{staticClass:"col"},[a("div",{staticClass:"row justify-end"},[t._v("\n              "+t._s(t._f("formatRp")(t.lelang.bid[0].nominal))+"\n            ")]),t.lelang.bid[1]?a("div",{staticClass:"row justify-end"},[t._v("\n              "+t._s(t._f("formatRp")(t.lelang.bid[1].nominal))+"\n            ")]):t._e()])]),t.lastBidder?a("div",t._l(t.lelang.bid,(function(e,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[t._v("\n                "+t._s(t._f("timeFormat")(e.created_at))+"\n                "),a("span",{staticClass:"text-bold q-mx-sm"},[t._v(t._s(e.bidder.name))])])]),a("div",{staticClass:"col"},[a("div",{staticClass:"row justify-end"},[t._v("\n                "+t._s(t._f("formatRp")(e.nominal))+"\n              ")])])])})),0):t._e()])],1):t._e(),a("q-separator"),a("q-card-section",{domProps:{innerHTML:t._s(t.lelang.deskripsi)}})],1),a("q-dialog",{attrs:{maximized:t.maximizedToggle,persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.popupImage,callback:function(e){t.popupImage=e},expression:"popupImage"}},[a("q-carousel",{staticClass:"bg-black text-white shadow-1",attrs:{"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white",padding:"",arrows:""},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.medias,(function(e,s){return a("q-carousel-slide",{key:"media"+s,attrs:{name:s}},[e.video?a("div",[a("q-video",{staticClass:"absolute-full",attrs:{src:t.urlPath+e.media}})],1):a("div",[a("q-img",{staticClass:"absolute-full",attrs:{src:t.urlPath+e.media}})],1)])})),1)],1),a("q-footer",{staticClass:"bg-white",attrs:{bordered:""}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col q-pa-md"},[t.distance<0?a("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-arrow-ios-forward",color:"primary","text-color":"white",label:"Berakhir",disable:""}}):a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col q-mx-sm"},[a("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-plus",color:"white","text-color":"red",dense:t.dense,label:t._f("formatRp")(t.lelang.kelipatan*t.times)},on:{click:t.plusTimes}})],1),a("div",{staticClass:"col q-mx-sm"},[a("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-arrow-ios-forward",color:"primary","text-color":"white",label:"bid",dense:t.dense},on:{click:t.bid}})],1)])])],1)])])],1)},i=[],l=a("ded3"),n=a.n(l),o=(a("5319"),a("13d5"),a("4e82"),a("758b")),r=a("68fc"),d=a("b166"),c=a("1ccd"),m=a("4d7a"),u=a("2f62"),h={name:"DraftJadi",components:{LightboxKoe:r["a"]},data(){return{thumbnail:null,medias:[],slide:0,maximizedToggle:!0,user:{},lelang:{},popupImage:!1,status:null,days:0,hours:0,minutes:0,seconds:0,distance:null,nominalBid:0,times:1,lastBidder:!1}},filters:{formatRp(t){return"Rp "+Number(t).toFixed(0).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1.")},berakhirPada(t){const e=parseInt(Object(d["a"])(new Date(t),"T"));return Object(c["a"])(e)},timeFormat(t){return Object(d["a"])(new Date(t),"dd MMM, KK:mm")},charLimit(t){return t.length>=16?t.substr(0,14)+"..":t}},created(){this.getLelangBy(this.$route.params.slug)},mounted(){},computed:n()(n()({urlPath(){return o["e"]()}},Object(u["c"])("users",{bidder:"user"})),{},{dense(){let t=this.lelang.kelipatan*this.times;return t.toString().length>=5}}),methods:n()(n()({},Object(u["b"])("notifications",["addNotifications"])),{},{forum(){this.$router.replace(this.$route.query.redirect||{name:"forum",params:{slug:this.lelang.id}},(()=>{}))},timerId(){this.dueDate=new Date(this.lelang.berakhir).getTime(),this.timer=setInterval(this.countdownTimer,1e3),console.log("lelang berakhir",this.lelang.berakhir)},countdownTimer(){let t=(new Date).getTime();this.distance=this.dueDate-t,this.days=Math.floor(this.distance/864e5),this.hours=Math.floor(this.distance%864e5/36e5),this.minutes=Math.floor(this.distance%36e5/6e4)<10?"0"+Math.floor(this.distance%36e5/6e4):Math.floor(this.distance%36e5/6e4),this.seconds=Math.floor(this.distance%6e4/1e3)<10?"0"+Math.floor(this.distance%6e4/1e3):Math.floor(this.distance%6e4/1e3),this.distance<0&&(clearInterval(this.timer),this.ended=!0)},coba(){var t=this.lelang.berakhir,e=Object(d["a"])(new Date(t),"MM-dd-yyyy KK:mm:ss"),a=Object(d["a"])(new Date,"MM-dd-yyyy KK:mm:ss");if(a>e)return this.status="berakhir";{const e=parseInt(Object(d["a"])(new Date(t),"T"));return this.status=Object(c["a"])(e,{locale:m["a"]})+" lagi"}},getLelangBy(t){this.$q.loading.show({message:"Fetcing data, please wait..."}),o["c"]().get(`/lelang/by/${t}`).then((t=>{this.$q.loading.hide(),console.log("lelang",t.data),this.lelang=t.data,this.timerId();let e=[];t.data.media_lelang.map((function(a,s){e.push({media:t.data.media_lelang[s].image,default:t.data.media_lelang[s].status,video:!1})})),t.data.video_lelang.map((function(a,s){e.push({media:t.data.video_lelang[s].video,default:t.data.video_lelang[s].status,video:!0})})),this.medias=e;var a=this.medias.filter((function(t){return"1"==t.default}));this.thumbnail=void 0==!a?a[0].media:this.medias[0].media,this.nominalBid=t.data.bid.reduce(((t,e)=>t+e.nominal),0),console.log("nominal",this.nominalBid),this.user=t.data.user;let s=this.lelang.bid;s.sort(((t,e)=>e.id-t.id)),this.lelang.bid=s,this.$q.loading.hide()})).catch((t=>{console.log(t),this.$q.loading.hide(),this.$q.notify({message:"Mohon Maaf, Terjadi kesalahan jaringan mohon coba lagi beberapa waktu kedepan"})}))},closePopup(){console.log("close popup image"),this.popupImage=!1},bid(){if(console.log("bidder",this.bidder.id),console.log("owner",this.lelang.user_id),this.bidder.id==this.lelang.user_id)this.$q.notify({message:"Masak mau ngebid punya sendiri?",position:"center"});else if(1!=this.bidder.bidder)this.$q.notify({message:"Anda belum akitvasi.",position:"center"});else{this.$q.loading.show({message:"sedang menyerahkan data bid anda..."});let t={lelang_id:this.lelang.id,nominal:this.lelang.kelipatan*this.times},e={to:{user:[this.lelang.user_id]},topik:{type:"Lelang Bid",id:this.lelang.id},title:"Bid Baru",message:"Bid baru dari "+this.bidder.name,link:"/"};console.log(t),o["c"]().post("/bid/store_bid",t).then((t=>{this.$q.notify({message:"Bid berhasil",position:"center"}),this.getLelangBy(this.$route.params.slug),this.addNotifications(e)})).catch((()=>{this.$q.loading.hide()}))}},plusTimes(){this.times=this.times+1}}),watch:{lelang(){this.coba()}}},p=h,g=(a("a4c9"),a("2877")),b=a("9989"),f=a("de5e"),v=a("9c40"),_=a("05c0"),w=a("880c"),q=a("62cd"),C=a("068f"),k=a("6ac01"),y=a("f09f"),x=a("a370"),B=a("eb85"),j=a("0016"),$=a("24e8"),M=a("7ff0"),I=a("2eeb"),Q=a("eebe"),T=a.n(Q),P=Object(g["a"])(p,s,i,!1,null,"229aade5",null);e["default"]=P.exports;T()(P,"components",{QPage:b["a"],QPageSticky:f["a"],QBtn:v["a"],QTooltip:_["a"],QCarousel:w["a"],QCarouselSlide:q["a"],QImg:C["a"],QVideo:k["a"],QCard:y["a"],QCardSection:x["a"],QSeparator:B["a"],QIcon:j["a"],QDialog:$["a"],QFooter:M["a"]}),T()(P,"directives",{GoBack:I["a"]})}}]);