(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"026b":function(t,a,e){"use strict";e("2e2c")},"2e2c":function(t,a,e){},"68fc":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"fullscreen dark-popup-2"},[e("q-page-sticky",{attrs:{position:"top-right",offset:[10,10]}},[e("q-btn",{attrs:{flat:"",color:"white",icon:"close"},on:{click:function(a){t.open=!t.open}}})],1)],1)},i=[],l={computed:{open:{get(){return this.$store.state.popup.open},set(t){this.$store.commit("popup/SET_OPEN",t)}}}},n=l,o=e("2877"),r=e("de5e"),d=e("9c40"),c=e("eebe"),m=e.n(c),u=Object(o["a"])(n,s,i,!1,null,"2902db65",null);a["a"]=u.exports;m()(u,"components",{QPageSticky:r["a"],QBtn:d["a"]})},ebc0:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",[e("q-carousel",{staticClass:"bg-primary text-white shadow-1",attrs:{"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white",navigation:"",padding:"",arrows:"",height:"350px"},model:{value:t.slide,callback:function(a){t.slide=a},expression:"slide"}},t._l(t.medias,(function(a,s){return e("q-carousel-slide",{key:"media"+s,attrs:{name:s}},[a.video?e("div",[e("q-video",{staticClass:"absolute-full",attrs:{src:t.urlPath+a.media}})],1):e("div",[e("q-img",{staticClass:"absolute-full",attrs:{src:t.urlPath+a.media},on:{click:function(a){t.popupImage=!t.popupImage}}})],1)])})),1),e("q-card",{staticClass:"my-card",attrs:{flat:"",square:""}},[e("q-card-section",{staticClass:"q-pt-sm bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h6 text-white"},[t._v("\n            "+t._s(t._f("formatRp")(t.lelang.harga_pembuka+t.nominalBid))+"\n          ")])]),e("div",{staticClass:"col text-right"},[e("div",{staticClass:"text-white"},[t._v("berakhir dalam")]),e("div",{staticClass:"text-white"},[e("q-btn",{attrs:{push:"","no-caps":"",size:"sm",icon:"eva-clock",color:"black","text-color":"white",label:t.status}})],1)])])]),e("q-separator"),e("q-card-section",[e("div",{staticClass:"row no-wrap items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-body1 text-weight-medium"},[t._v(t._s(t.lelang.judul))]),e("div",[e("q-icon",{staticClass:"text-purple q-mr-sm f-16",attrs:{name:"eva-person-done"}}),e("span",[t._v(t._s(t.user.name))])],1),e("div",[e("q-icon",{staticClass:"text-purple f-14 q-mr-sm",attrs:{name:"fas fa-map-marker-alt"}}),e("span",[t._v(t._s(t.user.kota))])],1)]),e("div",{staticClass:"col text-right"},[e("q-btn",{staticStyle:{color:"grey"},attrs:{"no-caps":"",outline:"",disable:""}},[e("q-icon",{staticClass:"text-primary",staticStyle:{"font-size":"1em"},attrs:{name:"eva-plus"}}),e("q-icon",{staticClass:"text-primary q-mr-sm",staticStyle:{"font-size":"1em"},attrs:{name:"eva-plus"}}),t._v("\n            "+t._s(t._f("formatRp")(t.lelang.kelipatan))+"\n          ")],1),e("q-btn",{staticClass:"q-mt-sm",staticStyle:{color:"grey"},attrs:{"no-caps":""},on:{click:t.forum}},[e("q-icon",{staticClass:"text-primary q-mr-sm",staticStyle:{"font-size":"1.5em"},attrs:{name:"eva-message-circle-outline"}}),t._v("\n            Group\n          ")],1)],1)])]),void 0!=t.lelang.bid&&t.lelang.bid.length?e("div",[e("q-separator"),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("p",{staticClass:"q-mt-sm"},[e("span",{staticClass:"text-bold text-blue"},[t._v("Bid Terakhir")])])]),e("div",{staticClass:"col text-italic items-center"},[e("div",{staticClass:"row justify-end"},[e("div",{staticClass:"q-mt-sm"},[e("span",[t._v(t._s(t.lelang.bid.length)+" bid total")])]),t.lelang.bid.length>2?e("div",[t.lastBidder?t._e():e("q-btn",{attrs:{"no-caps":"",dense:"",flat:"",icon:"eva-chevron-down-outline"},on:{click:function(a){t.lastBidder=!t.lastBidder}}}),t.lastBidder?e("q-btn",{attrs:{"no-caps":"",dense:"",flat:"",icon:"eva-chevron-up-outline"},on:{click:function(a){t.lastBidder=!t.lastBidder}}}):t._e()],1):t._e()])])]),t.lastBidder?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[t._v("\n              "+t._s(t._f("timeFormat")(t.lelang.bid[0].created_at))+"\n              "),e("span",{staticClass:"text-bold q-mx-sm"},[t._v("\n                "+t._s(t.lelang.bid[0].bidder.name))])]),t.lelang.bid[1]?e("div",{staticClass:"row"},[t._v("\n              "+t._s(t._f("timeFormat")(t.lelang.bid[1].created_at))+"\n              "),e("span",{staticClass:"text-bold q-mx-sm"},[t._v("\n                "+t._s(t.lelang.bid[1].bidder.name))])]):t._e()]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-end"},[t._v("\n              "+t._s(t._f("formatRp")(t.lelang.bid[0].nominal))+"\n            ")]),t.lelang.bid[1]?e("div",{staticClass:"row justify-end"},[t._v("\n              "+t._s(t._f("formatRp")(t.lelang.bid[1].nominal))+"\n            ")]):t._e()])]),t.lastBidder?e("div",t._l(t.lelang.bid,(function(a,s){return e("div",{key:s,staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[t._v("\n                "+t._s(t._f("timeFormat")(a.created_at))+"\n                "),e("span",{staticClass:"text-bold q-mx-sm"},[t._v(t._s(a.bidder.name))])])]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-end"},[t._v("\n                "+t._s(t._f("formatRp")(a.nominal))+"\n              ")])])])})),0):t._e()])],1):t._e(),e("q-separator"),e("q-card-section",{domProps:{innerHTML:t._s(t.lelang.deskripsi)}})],1),e("q-dialog",{attrs:{maximized:t.maximizedToggle,persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.popupImage,callback:function(a){t.popupImage=a},expression:"popupImage"}},[e("q-carousel",{staticClass:"bg-primary text-white shadow-1",attrs:{"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white",padding:"",arrows:""},model:{value:t.slide,callback:function(a){t.slide=a},expression:"slide"}},t._l(t.medias,(function(a,s){return e("q-carousel-slide",{key:"media"+s,attrs:{name:s}},[a.video?e("div",[e("q-video",{staticClass:"absolute-full",attrs:{src:t.urlPath+a.media}})],1):e("div",[e("q-img",{staticClass:"absolute-full",attrs:{src:t.urlPath+a.media}})],1)])})),1)],1),e("q-footer",{staticClass:"bg-white",attrs:{bordered:""}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col q-pa-md"},[t.distance<0?e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-arrow-ios-forward",color:"primary","text-color":"white",label:"Berakhir",disable:""}}):e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col q-mx-sm"},[e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-plus",color:"white","text-color":"red",label:t.lelang.kelipatan*t.times},on:{click:t.plusTimes}})],1),e("div",{staticClass:"col q-mx-sm"},[e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-arrow-ios-forward",color:"primary","text-color":"white",label:"bid"},on:{click:t.bid}})],1)])])],1)])])],1)},i=[],l=e("ded3"),n=e.n(l),o=(e("5319"),e("13d5"),e("4e82"),e("758b")),r=e("68fc"),d=e("b166"),c=e("1ccd"),m=e("4d7a"),u=e("2f62"),h={name:"DraftJadi",components:{LightboxKoe:r["a"]},data(){return{thumbnail:null,medias:[],slide:0,maximizedToggle:!0,user:{},lelang:{},popupImage:!1,status:null,days:0,hours:0,minutes:0,seconds:0,distance:null,nominalBid:0,times:1,lastBidder:!1}},filters:{formatRp(t){return"Rp "+Number(t).toFixed(0).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1.")},berakhirPada(t){const a=parseInt(Object(d["a"])(new Date(t),"T"));return Object(c["a"])(a)},timeFormat(t){return Object(d["a"])(new Date(t),"dd MMM, KK:mm")}},created(){this.getLelangBy(this.$route.params.slug)},mounted(){},computed:n()({urlPath(){return o["e"]()}},Object(u["c"])("users",{bidder:"user"})),methods:n()(n()({},Object(u["b"])("notifications",["addNotifications"])),{},{forum(){this.$router.replace(this.$route.query.redirect||{name:"forum",params:{slug:this.lelang.id}},(()=>{}))},timerId(){this.dueDate=new Date(this.lelang.berakhir).getTime(),this.timer=setInterval(this.countdownTimer,1e3),console.log("lelang berakhir",this.lelang.berakhir)},countdownTimer(){let t=(new Date).getTime();this.distance=this.dueDate-t,this.days=Math.floor(this.distance/864e5),this.hours=Math.floor(this.distance%864e5/36e5),this.minutes=Math.floor(this.distance%36e5/6e4)<10?"0"+Math.floor(this.distance%36e5/6e4):Math.floor(this.distance%36e5/6e4),this.seconds=Math.floor(this.distance%6e4/1e3)<10?"0"+Math.floor(this.distance%6e4/1e3):Math.floor(this.distance%6e4/1e3),this.distance<0&&(clearInterval(this.timer),this.ended=!0)},coba(){var t=this.lelang.berakhir,a=Object(d["a"])(new Date(t),"MM-dd-yyyy KK:mm:ss"),e=Object(d["a"])(new Date,"MM-dd-yyyy KK:mm:ss");if(e>a)return this.status="berakhir";{const a=parseInt(Object(d["a"])(new Date(t),"T"));return this.status=Object(c["a"])(a,{locale:m["a"]})+" lagi"}},getLelangBy(t){this.$q.loading.show({message:"Fetcing data, please wait..."}),o["c"]().get(`/lelang/by/${t}`).then((t=>{this.$q.loading.hide(),console.log("lelang",t.data),this.lelang=t.data,this.timerId();let a=[];t.data.media_lelang.map((function(e,s){a.push({media:t.data.media_lelang[s].image,default:t.data.media_lelang[s].status,video:!1})})),t.data.video_lelang.map((function(e,s){a.push({media:t.data.video_lelang[s].video,default:t.data.video_lelang[s].status,video:!0})})),this.medias=a;var e=this.medias.filter((function(t){return"1"==t.default}));this.thumbnail=void 0==!e?e[0].media:this.medias[0].media,this.nominalBid=t.data.bid.reduce(((t,a)=>t+a.nominal),0),console.log("nominal",this.nominalBid),this.user=t.data.user,console.log("medias",this.medias);let s=this.lelang.bid;s.sort(((t,a)=>a.id-t.id)),this.lelang.bid=s,this.$q.loading.hide()})).catch((t=>{console.log(t),this.$q.loading.hide(),this.$q.notify({message:"Mohon Maaf, Terjadi kesalahan jaringan mohon coba lagi beberapa waktu kedepan"})}))},closePopup(){this.popupImage=!1},bid(){if(console.log("bidder",this.bidder.id),console.log("owner",this.lelang.user_id),this.bidder.id==this.lelang.user_id)this.$q.notify({message:"Masak mau ngebid punya sendiri?",position:"center"});else if(1!=this.bidder.bidder)this.$q.notify({message:"Anda tidak memiliki hak untuk melakukan bid",position:"center"});else{this.$q.loading.show({message:"sedang menyerahkan data bid anda..."});let t={lelang_id:this.lelang.id,nominal:this.lelang.kelipatan*this.times},a={to:{user:[this.lelang.user_id]},topik:{type:"Lelang Bid",id:this.lelang.id},title:"Bid Baru",message:"Bid baru dari "+this.bidder.name,link:"/"};console.log(t),o["c"]().post("/bid/store_bid",t).then((t=>{this.$q.notify({message:"Bid berhasil",position:"center"}),this.getLelangBy(this.$route.params.slug),this.addNotifications(a)})).catch((()=>{this.$q.loading.hide()}))}},plusTimes(){this.times=this.times+1}}),watch:{lelang(){this.coba()}}},p=h,g=(e("026b"),e("2877")),b=e("9989"),f=e("880c"),v=e("62cd"),_=e("068f"),w=e("6ac01"),C=e("f09f"),q=e("a370"),k=e("9c40"),y=e("eb85"),x=e("0016"),B=e("24e8"),j=e("7ff0"),$=e("eebe"),M=e.n($),I=Object(g["a"])(p,s,i,!1,null,"2a555c3a",null);a["default"]=I.exports;M()(I,"components",{QPage:b["a"],QCarousel:f["a"],QCarouselSlide:v["a"],QImg:_["a"],QVideo:w["a"],QCard:C["a"],QCardSection:q["a"],QBtn:k["a"],QSeparator:y["a"],QIcon:x["a"],QDialog:B["a"],QFooter:j["a"]})}}]);