(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{e584:function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",[t("div",{staticClass:"q-pa-md"},[t("div",{staticClass:"q-mb-md"},[t("div",{staticClass:"alert-primary text-grey-8 q-pa-md"},[t("b",[a._v("Foto "+a._s(a.images.length)+" / 5 . ")]),a._v(" Pilih Foto Utama Penawaran\n        Anda. Tambahkan foto lainnya dari sudut yang berbeda untuk menunjukkan\n        kecacadan atau kelebihan dari penawaran Anda\n      ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:0==a.images.length,expression:"images.length == 0"}],staticClass:"flex flex-center column",staticStyle:{height:"300px"}},[t("div",[t("q-icon",{attrs:{size:"3em",name:"check",color:"grey"}})],1),t("div",{staticClass:"text-grey"},[a._v("Belum Ada Foto")])]),t("div",{staticClass:"q-col-gutter-md row items-start"},a._l(a.images,(function(e,i){return t("div",{key:"image"+i,staticClass:"col-6"},[t("q-skeleton",{directives:[{name:"show",rawName:"v-show",value:a.progress,expression:"progress"}],attrs:{height:"150px",square:"",animation:"fade"}}),t("q-img",{directives:[{name:"show",rawName:"v-show",value:!a.progress,expression:"!progress"}],staticClass:"rounded-borders",staticStyle:{width:"100%"},attrs:{src:a.urlPath+e.image,"spinner-color":"white",ratio:1}},[t("div",{staticClass:"absolute-bottom text-subtitle1 text-center"},[t("div",{staticClass:"row justify-between"},[t("q-fab",{attrs:{icon:"eva-edit-2",color:"black",direction:"up","vertical-actions-align":"left",padding:"xs"}},[t("q-fab-action",{attrs:{"label-position":"left",color:"red",icon:"eva-trash",label:"Hapus"},on:{click:function(t){return a.confirmDel(e.id)}}}),t("q-fab-action",{attrs:{"label-position":"left",color:"black",icon:"eva-done-all",label:"Default"},on:{click:function(t){return a.changeStatus(e.id)}}})],1),t("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.status,expression:"image.status === 1"}],attrs:{outline:"",size:"sm",round:"",color:"white",icon:"eva-done-all"}})],1)])]),t("q-dialog",{ref:"dialogAlert",refInFor:!0,attrs:{persistent:""},model:{value:a.confirm,callback:function(e){a.confirm=e},expression:"confirm"}},[t("q-card",[t("q-card-section",{staticClass:"row items-center"},[t("q-avatar",{attrs:{icon:"eva-alert-triangle",color:"primary","text-color":"white"}}),t("span",{staticClass:"q-ml-sm text-h6"},[a._v("Yakin foto "+a._s(a.imageId)+" ini dihapus? ")])],1),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",flat:"",label:"Cancel",color:"primary"}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",flat:"",label:"Hapus",color:"primary"},on:{click:function(e){return a.hapusFoto(a.imageId)}}})],1)],1)],1)],1)})),0)]),t("q-page-sticky",{attrs:{position:"bottom-right",offset:[20,20]}},[t("q-fab",{attrs:{icon:"eva-plus",color:"primary",direction:"up","vertical-actions-align":"right"}},[t("q-fab-action",{attrs:{"label-position":"left",color:"grey",icon:"photo_camera",label:"Camera"},on:{click:a.gotoCamera}}),t("q-fab-action",{attrs:{"label-position":"left",color:"grey",icon:"perm_media",label:"Gallery"},on:{click:a.getFile}}),t("q-input",{ref:"myFileInput",staticStyle:{display:"none"},attrs:{type:"file",label:"Standard",accept:"image/*"},on:{input:a.captureImageFallback},model:{value:a.myImage,callback:function(e){a.myImage=e},expression:"myImage"}})],1)],1),a.popupImage?t("q-page-sticky",{staticClass:"depan",attrs:{position:"top-right",offset:[18,0]}},[t("q-btn",{attrs:{dense:"",flat:"",icon:"close",size:"lg","text-color":"white"},on:{click:function(e){a.popupImage=!a.popupImage}}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[a._v("Close")])],1)],1):a._e(),t("q-dialog",{attrs:{maximized:!0,persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:a.popupImage,callback:function(e){a.popupImage=e},expression:"popupImage"}},[t("q-carousel",{staticClass:"bg-black text-white shadow-1",attrs:{"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white",padding:"",arrows:""},model:{value:a.slide,callback:function(e){a.slide=e},expression:"slide"}},a._l(a.images,(function(e,i){return t("q-carousel-slide",{key:"media"+i,attrs:{name:i}},[t("div",[t("q-img",{staticClass:"absolute-full",attrs:{src:a.urlPath+e.image}})],1)])})),1)],1),t("q-footer",{staticClass:"bg-white",attrs:{bordered:""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col q-pa-md"},[t("q-btn",{staticClass:"full-width",attrs:{"no-caps":"",icon:"eva-arrow-ios-back",color:"white","text-color":"black",label:"Kembali"},on:{click:a.backTo}})],1),t("div",{staticClass:"col q-pa-md"},[t("q-btn",{staticClass:"full-width",attrs:{"no-caps":"","icon-right":"eva-arrow-ios-forward",color:"primary","text-color":"white",label:"Lanjut"},on:{click:a.lanjut}})],1)])])],1)},s=[],o=(t("5319"),t("e6cf"),t("758b")),l=t("c2f6"),r={name:"AddFotoLelang",data(){return{myImage:null,images:[],confirm:!1,popupImage:!1,slide:0,progress:!1,imageId:0}},created(){this.getLelangBy(this.$route.params.slug)},computed:{urlPath(){return o["e"]()}},methods:{backTo(){this.$router.replace(this.$route.query.redirect||{name:"add.lelang",params:{slug:this.$route.params.slug}},(()=>{}))},lanjut(){this.$router.replace(this.$route.query.redirect||{name:"video.lelang",params:{slug:this.$route.params.slug}},(()=>{}))},getLelangBy(a){this.$q.loading.show(),this.progress=!0,o["c"]().get(`/lelang/by/${a}`).then((a=>{console.log("lelang",a.data.media_lelang),this.images=a.data.media_lelang,this.$q.loading.hide(),setTimeout((()=>{this.progress=!1}),2e3)})).catch((a=>{this.progress=!1,console.log(a)}))},getFile(){this.$refs.myFileInput.$el.click()},captureImageFallback(a){l["b"]({file:a[0],maxSize:500}).then((a=>{this.myImage=a,this.upLoadImage(this.myImage)}))},async upLoadImage(a){if(this.images.length>=5)return this.$q.notify({message:"Maaf, Max 5 Foto Saja",icon:"eva-info"}),!1;let e=a;const t=new FormData;t.append("image",e),t.append("lelang_id",this.$route.params.slug),this.$q.loading.show();try{await o["d"]().post("/lelang/upload_image",t);this.$q.notify({message:"Image Berhasil disimpan",icon:"eva-info"}),this.getLelangBy(this.$route.params.slug),this.$q.loading.hide()}catch(i){this.$q.loading.hide(),console.log(i)}},gotoCamera(){if(this.images.length>=5)return this.$q.notify({message:"Maaf, Max 5 Foto Saja",icon:"eva-info"}),!1;this.$router.replace(this.$route.query.redirect||{name:"foto.lelang.camera",params:{slug:this.$route.params.slug}},(()=>{}))},confirmDel(a){this.imageId=a,this.confirm=!this.confirm},hapusFoto(a){0!==a&&null!==a&&(this.$q.loading.show(),o["c"]().delete(`/media_lelang/remove/${a}`).then((()=>{this.getLelangBy(this.$route.params.slug),this.imageId=0})).catch((a=>{console.log(a),this.$q.notify({message:"Maaf, Ada Kesalahan, Harap Ulangi",icon:"eva-info"}),this.$q.loading.hide()})))},changeStatus(a){this.$q.loading.show();let e={params:{id:a,lelang_id:this.$route.params.slug}};o["c"]().get("/media_lelang/update_status",e).then((()=>{this.getLelangBy(this.$route.params.slug)}))}}},n=r,c=t("2877"),m=t("9989"),g=t("0016"),d=t("293e"),p=t("068f"),u=t("c294"),h=t("72db"),f=t("9c40"),b=t("9564"),v=t("24e8"),w=t("f09f"),q=t("a370"),y=t("cb32"),k=t("4b7e"),C=t("de5e"),$=t("27f9"),x=t("05c0"),I=t("880c"),_=t("62cd"),Q=t("6ac01"),F=t("7ff0"),S=t("7f67"),j=t("eebe"),A=t.n(j),L=Object(c["a"])(n,i,s,!1,null,"8bc196da",null);e["default"]=L.exports;A()(L,"components",{QPage:m["a"],QIcon:g["a"],QSkeleton:d["a"],QImg:p["a"],QFab:u["a"],QFabAction:h["a"],QBtn:f["a"],QToggle:b["a"],QDialog:v["a"],QCard:w["a"],QCardSection:q["a"],QAvatar:y["a"],QCardActions:k["a"],QPageSticky:C["a"],QInput:$["a"],QTooltip:x["a"],QCarousel:I["a"],QCarouselSlide:_["a"],QVideo:Q["a"],QFooter:F["a"]}),A()(L,"directives",{ClosePopup:S["a"]})}}]);